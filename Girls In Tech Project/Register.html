<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <link rel="stylesheet" type="text/css" href="/stylesheet.css">
    <link rel="icon" type="image/png" href="/nannyIcon.png">
    <style>
        html {
            height: 100%;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-image: url(/pexels-kasuma-908644.jpg);
            background-repeat: no-repeat;
            background-size: cover;
            backdrop-filter: 50%;
            overflow-x: hidden;
            min-height: 100vh;
        }

        *{
            margin: 0;
            padding: 0;
            list-style-type: none;
            text-decoration: none;
        }

        #check:checked~ section{
            margin-left: 250px;
        }
      
        #mainHolder{
            width: 80%;
            margin-top: 10%;
            height: fit-content;
            display: grid;
            justify-items: center;
            align-items: center;
            background-color: blur;
            border-radius: 7px;
            box-shadow: 0px 0px 5px 2px black;
            margin-bottom: 10%;
            margin-left: 10%;
        }


        form { 
            background-color: blurry; 
            padding: 40px; 
            border-radius: 5px; 
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); 
        }

        h1 { 
            text-align: center; 
            margin-bottom: 40px; 
        }

        label { 
            display: block; 
            margin-bottom: 10px; 
        }

        input[type="text"], input[type="email"], input[type="password"] {
             width: 100%; 
             padding: 10px; 
             border: 1px solid #ddd; 
             border-radius: 5px; 
             margin-bottom: 20px; 
        }

        input[type="submit"] { 
            background-color: rgb(93, 103, 148); 
            color: #fff; 
            padding: 10px 20px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
        }

        input[type="submit"]:hover {
             background-color: #551a8b; 
        }


        header h1 {
            color: white;
            margin: 0;
        }

        nav ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
        }

        nav li {
            display: inline;
            margin-right: 10px;
        }

        nav a {
            color: white;
            text-decoration: none;
        }

        main {
            padding: 20px;
        }

        h2 {
            margin-bottom: 20px;
        }
        
        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            margin-bottom: 10px;
        }

        #main-footer{
            background-color: transparent;
            padding: 20px;
            width: 100%;
            height: 100px; 
            position: relative;
            bottom: 0;
            left: 0;
            display: grid;  
            justify-content: center;
            align-content: center;
            align-items: center;
            background: transparent;
            backdrop-filter: blur(10px);
            border-radius: 0; 
            box-shadow: 0px 0px 5px 2px black;
        }


        a{
            text-decoration: none;
            color: #000;
        }

        .site-header{ 
            border-bottom: 1px solid none;
            padding: .5em 1em;
            background: transparent;
            backdrop-filter: blur(10px);
            background-color: transparent;
            border-radius: 0; 
            box-shadow: 0px 0px 5px 2px black;
        }


        .site-header::after {
            content: "";
            display: table;
            clear: both;
        }

        .site-identity {
            float: left;
        }

        .site-identity h1 {
            font-size: 1.5em;
            margin: .7em 0 .3em 0;
            display: inline-block;
        }

        .site-identity img {
            max-width: 55px;
            float: left;
            margin: 0 10px 0 0;
        }

        .site-navigation {
            float: right;
        }

        .site-navigation ul, li {
            margin: 0; 
            padding: 0;
        }

        .site-navigation li {
            display: inline-block;
            margin: 1.4em 1em 1em 1em;
        }

    </style>
    <script src="/script.js">
         document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('registrationForm');
            const passwordInput = document.getElementById('password');
            const confirmPasswordInput = document.getElementById('confirmPassword');
            const passwordStrengthText = document.getElementById('passwordStrength');

            passwordInput.addEventListener('input', () => {
                const strength = calculatePasswordStrength(passwordInput.value);
                passwordStrengthText.textContent = `Password Strength: ${strength}`;
            });

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const formData = new FormData(form);

                const password = formData.get('password');
                const confirmPassword = formData.get('confirmPassword');

                if (password !== confirmPassword) {
                    alert('Passwords do not match');
                    return;
                }

                fetch('/api/register', {
                    method: 'POST',
                    body: formData,
                })
                .then((res) => {
                    if (res.ok) {
                        alert('Registration successful');
                        window.location.href = '/Profile.html';
                    } else {
                        alert('Error registering');
                    }
                })
                .catch((err) => {
                    console.error(err);
                    alert('Error registering');
                });
            });
        });

        function calculatePasswordStrength(password) {
            // Count the number of characters
            const len = password.length;

            // Check if password contains uppercase letters, lowercase letters, numbers, and special characters
            const hasUpperCase = /[A-Z]/.test(password);
            const hasLowerCase = /[a-z]/.test(password);
            const hasNumbers = /\d/.test(password);
            const hasSpecial = /[^A-Za-z0-9]/.test(password);

            // Define a score for each condition
            let score = 0;
            score += len >= 8 ? 1 : 0;
            score += hasUpperCase ? 1 : 0;
            score += hasLowerCase ? 1 : 0;
            score += hasNumbers ? 1 : 0;
            score += hasSpecial ? 1 : 0;

            // Return password strength based on the score
            if (score === 0) {
                return 'Weak';
            } else if (score <= 2) {
                return 'Medium';
            } else {
                return 'Strong';
            }
        }
    </script>
</head>
<body>
    <header class="site-header">
        <div class="site-identity">
            <a href="#"><img src="put logo here" alt="Site Name" /></a>
            <h1><a href="#">NANNY CO.</a></h1>
        </div>  
        <nav class="site-navigation">
            <ul class="nav">
            <li><a href="#">About</a></li> 
            <li><a href="#">News</a></li> 
            <li><a href="#">Contact</a></li> 
            </ul>
        </nav>
    </header>
    <main id="mainHolder">
         <form id="registrationForm">
            <h1 id="login-header">Create New Account</h1>

            <label for="username">Name:</label>
            <input type="text" id="username" required><br>

            <label for="surname">Surname:</label>
            <input type="text" id="surname" required><br>

            <label for="dateOfBirth">Date of Birth:</label>
            <input type="date" id="dateOfBirth" required> <br>

            <label for="phoneNumber">Phone Number:</label>
            <input type="number" id="phoneNumber" required> <br>

            <label for="email">Email:</label>
            <input type="email" id="email" required><br><br>

            <label for="password">Password:</label>
            <input type="password" id="password" required>

            <label for="confirmPassword">Confirm Password:</label>
            <input type="password" id="confirmPassword" required>
        
            <span id="passwordStrength"></span>

            <label for="isNanny">I am a nanny:</label>
            <input type="checkbox" id="isNanny" required><br>

            <label for="fileInput" class="certification">Upload certification:</label>
            <input type="file" id="fileInput" accept=".pdf" required> <br> <br>

            <label for="idInput" class="IdentityDocument">Upload ID:</label>
            <input type="file" id="idInput" accept=".pdf" required><br> <br>

            <input type="submit" value="Register">
            <!--I was thinking that the register button should automatically go to profile where one is able to edit their details as
                 needed and put other credentials because the registration layout is way too big, so basically come back here-->
        </form>
    </main>

    <footer id="main-footer">
        <p>Copyright &copy; 2023, Nanny Co. All Rights Reserved</p>
    </footer>
</body>
</html>
